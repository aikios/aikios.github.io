<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Thoughts (mine)</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>


<section id="app">
    <div class="container">
        <div class="row">
            <textarea type="text" id="nametextbox" class="input" placeholder="Name"
                v-model="newItemName">Anonymous</textarea>
        </div>

        <div class="row">
            <textarea type="text" id="commenttextbox" class="input" placeholder="Write a comment"
                v-model="newItemComment">No Comment.</textarea>
        </div>
        <div class="row">
            <button v-on:click="addItem()" class='primaryContained float-right' type="submit">Add Comment</button>
        </div>
    </div>

    <div class="row">
        <div class="row">
            <div class="row">
                <p v-for="items in item" v-text="items"></p>
            </div>
            <!--End Comment-->
        </div>
        <!--End col -->
    </div><!-- End row -->
    <!-- Vue JS -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js'> </script>
    <!--jQuery -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
    <script>
        $(document).ready(async function () {
            const response = await fetch("https://personalwebsite.mohammadkhan10.repl.co/comments?post=10", {
                method: "GET",
                headers: { "Content-Type": "application/json" },

            })
                .then(response => response.json())
            console.log(response)
            //const comments = JSON.parse(response);
            function commpost(value) {
                console.log("comment: " + value.name + " : " + value.comment)
                window.test.item.push(value.name + " : " + value.comment)
            }
            response.forEach(commpost);
        });
        $(document).ready(function () {
            $(".primaryContained").on('click', function () {
                $(".comment").addClass("commentClicked");
                fetch("https://personalwebsite.mohammadkhan10.repl.co/comment", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        postnumber: "10",
                        name: document.getElementById('nametextbox').value,
                        comment: document.getElementById('commenttextbox').value
                    })
                });

            });//end click
        });//End Function

        new Vue({
            el: "#app",
            data: {
                title: 'Add a comment',
                newItemName: '',
                newItemComment: '',
                item: [],
            },
            mounted: function () {
                window.test = this;
            },
            methods: {
                addItem() {
                    this.item.push(this.newItemName + " : " + this.newItemComment);
                }
                // loadComments() {
                //     this.item.push
                // }
            }
        });</script>
</section>